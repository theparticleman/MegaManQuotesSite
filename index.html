<html>

<head>
    <title>Mega Man Quotes</title>
    <link rel="stylesheet" href="site.css">
</head>

<body>
    <section>
        <main>
            <h1>Mega Man Quotes</h1>
            <img src="Mega Man.png" atl="Mega Man">
            <div id="quote"></div>
        </main>
        <footer>
            <a href="https://mythicant.com">Mythicant</a>
            <a href="https://github.com/theparticleman/MegaManQuotesCli">CLI</a>
            <a href="api">API</a>
            <a href="about">About</a>
        </footer>
    </section>

    <script>
        function getQuote() {
            let url = getUrl();
            fetch(url)
                .then(res => res.json())
                .then(quote => {
                    var quoteDiv = document.getElementById('quote');
                    var quoteText = document.createElement('q');
                    quoteText.id = 'quote-text';
                    quoteText.innerHTML = quote.text;
                    quoteDiv.appendChild(quoteText);
                    var quoteAuthor = document.createElement('p');
                    quoteAuthor.id = 'quote-author';
                    quoteAuthor.innerHTML = quote.author;
                    quoteDiv.appendChild(quoteAuthor);
                    var quoteSource = document.createElement('p');
                    quoteSource.id = 'quote-source';
                    quoteSource.innerHTML = quote.source;
                    quoteDiv.appendChild(quoteSource);
                });
        }
        function getUrl() {
            const params = new URLSearchParams(location.search);
            if (params.has('id')) {
                return 'http://api.megamanquotes.com/quotes/' + params.get('id');
            } else {
                return 'https://api.megamanquotes.com/random-quote';
            }

        }
        getQuote();
    </script>

    <!-- Lame Google Tag Manager stuff -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YNFTGSSJWE"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-YNFTGSSJWE');
    </script>
</body>

</html>